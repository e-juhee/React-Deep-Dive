# 9.4 리액트 애플리케이션 도커라이즈하기

> ### You will learn 📝
>
>- 9.4.1 리액트 앱을 도커라이즈하는 방법
>- 9.4.2 도커로 만든 이미지 배포하기
>- 9.4.3 정리

### Q1. 도커 이미지를 생성하는 과정에 대해 설명해 주세요. 9.3에서 언급했던 배포 방식과 비교해서 도커를 사용하는 방식의 이점은 무엇일까요? (유진)
- 클라우드 서비스를 활용해서 배포하는 것은 과정이 간단하다는 장점이 있지만, 커스터마이징에 제약이 있고 유연하지 못한 비용 체계가 문제가 될 수 있다.
- 도커를 사용하면 특정 배포 서비스에 종속적이지 않은 상태로 만들어 좀 더 유연하게 관리할 수 있다.
- 도커라이즈 과정
  - 도커 설치
  - Dockerfile 작성
  - 도커 이미지 빌드
  - 도커 이미지 실행

### Q2. 다음 dockerfile의 실행 구문은 빌드된 애플리케이션을 nginx 서버에서 실행하기 위한 과정의 일부입니다. 어떤 동작을 의도한 것인지 설명해 주세요. (유진)
`ENTRYPOINT ["nginx", "-g", "daemon off;"]`
- 컨테이너가 시작할 때 ENGINX를 실행하기 위한 명령어
- -g: global flag
- daemon off: daemon은 백그라운드에서 실행하는 것을 의미한다. 즉, 포어그라운드에서 실행하도록 설정한 것이다.
- 포그라운드 모드로 실행해서 컨테이너를 계속 실행시키는 명령어

### Q3. 도커의 이미지, 컨테이너, dockerfile의 관계를 자바스크립트의 클래스에 빗대어 설명해주세요. (채림)
- 이미지: 클래스 - 아직 실제로 존재하진 않는 템플릿 상태
- 컨테이너: 클래스의 인스턴스
- Dockerfile: 이미지를 어떻게 만들지 써놓은 것이므로 클래스를 정의하는 구문 자체
굿...👍

### Q4. 과거에 "웹 애플리케이션을 배포하기 위해 직접 장비를 준비하고, 해당 장비에 애플리케이션 구동에 필요한 각종 파일을 설치하고 소스를 다운로드해서 설치했던 과정"을 도커를 이용하면 어떻게 관리할 수 있나요? (주희)
- 이미지의 상태로 애플리케이션을 미리 빌드해서 만들어두면 해당 이미지를 실행할 수 있는 환경만 되면 도커 컨테이너를 만들 수 있어서 위 과정이 필요 없어진다.
- 도커를 이용하면 애플리케이션을 하나의 컨테이너로 만들어서 빠르게 배포할 수 있다.
- 어디서든 실행될 수 있는 이미지 상태로 애플리케이션을 준비해 둔다면 도커 이미지를 실행할 수 있는 최소한의 환경이 갖춰진 상태라면 어디서든 웹 애플리케이션을 배포할 수 있다.

-----
### Q5. 채림이는 노트북으로 도커 이미지를 빌드한 뒤 GCP에서 실행하려 했으나 배포에 실패했습니다. 가능한 원인과 해결방법에 대해 설명해주세요. (채림)
- 채림이의 노트북이 m1(실리콘 애플칩)을 사용하는 노트북이라면 빌드에 실패할 수 있다.
- docker inspect로 확인해보면 알 수 있다.
- 해결책
  - 아키텍쳐가 다르게 나온다면 빌드할 때 platform 옵션으로 아키텍쳐를 amd64로 변경한다.
  - 레포지토리를 cloud run에 연결해서 처음부터 자동 빌드 및 배포를 한다.

### Q6. 자동 확장 (auto scale)이 무엇인가요? (주희)
- 요청과 처리에 따른 인스턴스 개수를 탄력적으로 할당하는 것

### Q7. 다음의 상황에서 도커 허브에 도커 이미지를 업로드하기 위해 필요한 명령어는 무엇일까요? (유진)
```
프로젝트 이름: ubuntu, tag: 20.04, 계정: user, 저장소(repository): linux
** 현재 태그명: ubuntu:20.04 **
```
- `docker tag ubuntu:20.04 user/linux:[변경할 태그명]`
